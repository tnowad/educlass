name: GitHub to Telegram Notification

on:
  pull_request:
  pull_request_review:
  pull_request_review_comment:
  issues:
  issue_comment:
  workflow_run:
    workflows: ["CI/CD Pipeline"]
    types: 
      - completed

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - name: PR Notification
        if: github.event_name == 'pull_request'
        uses: appleboy/telegram-action@master
        with:
          to: "${{ secrets.TELEGRAM_CHAT_ID }}"
          token: "${{ secrets.TELEGRAM_BOT_TOKEN }}"
          message: |
            ğŸš€ *Pull Request Notification* ğŸš€
            ğŸ“Œ *Repository:* [${{ github.repository }}](https://github.com/${{ github.repository }})
            ğŸ“¢ *Action:* `${{ github.event.action }}`
            ğŸ”€ *Pull Request:* [#${{ github.event.pull_request.number }}](${{ github.event.pull_request.html_url }})
            âœ *Title:* `${{ github.event.pull_request.title }}`
            ğŸ‘¤ *By:* [${{ github.event.pull_request.user.login }}](${{ github.event.pull_request.user.html_url }})
            ğŸ”„ *Status:* `${{ github.event.pull_request.state }}`

            ğŸ”— *Diff:* [View Changes](${{ github.event.pull_request.html_url }}/files)

      - name: PR Review Notification
        if: github.event_name == 'pull_request_review'
        uses: appleboy/telegram-action@master
        with:
          to: "${{ secrets.TELEGRAM_CHAT_ID }}"
          token: "${{ secrets.TELEGRAM_BOT_TOKEN }}"
          message: |
            ğŸ” *Pull Request Review* ğŸ”
            ğŸ“Œ *Repository:* [${{ github.repository }}](https://github.com/${{ github.repository }})
            ğŸ“¢ *Action:* `${{ github.event.action }}`
            ğŸ”€ *Pull Request:* [#${{ github.event.pull_request.number }}](${{ github.event.pull_request.html_url }})
            ğŸ‘¤ *Reviewer:* [${{ github.event.review.user.login }}](${{ github.event.review.user.html_url }})
            ğŸ“ *State:* `${{ github.event.review.state }}`
            ğŸ’¬ *Comment:* `${{ github.event.review.body }}`

            ğŸ”— *View Review:* [Open Review](${{ github.event.review.html_url }})

      - name: PR Review Comment Notification
        if: github.event_name == 'pull_request_review_comment'
        uses: appleboy/telegram-action@master
        with:
          to: "${{ secrets.TELEGRAM_CHAT_ID }}"
          token: "${{ secrets.TELEGRAM_BOT_TOKEN }}"
          message: |
            ğŸ’¬ *Pull Request Review Comment* ğŸ’¬
            ğŸ“Œ *Repository:* [${{ github.repository }}](https://github.com/${{ github.repository }})
            ğŸ”€ *PR:* [#${{ github.event.pull_request.number }}](${{ github.event.pull_request.html_url }})
            ğŸ‘¤ *By:* [${{ github.event.comment.user.login }}](${{ github.event.comment.user.html_url }})
            ğŸ“ *Comment:* `${{ github.event.comment.body }}`

            ğŸ”— *View Comment:* [Open Comment](${{ github.event.comment.html_url }})

      - name: Issue Notification
        if: github.event_name == 'issues'
        uses: appleboy/telegram-action@master
        with:
          to: "${{ secrets.TELEGRAM_CHAT_ID }}"
          token: "${{ secrets.TELEGRAM_BOT_TOKEN }}"
          message: |
            ğŸ“ *Issue Notification* ğŸ“
            ğŸ“Œ *Repository:* [${{ github.repository }}](https://github.com/${{ github.repository }})
            ğŸ“¢ *Action:* `${{ github.event.action }}`
            ğŸ†• *Issue:* [#${{ github.event.issue.number }}](${{ github.event.issue.html_url }})
            âœ *Title:* `${{ github.event.issue.title }}`
            ğŸ‘¤ *By:* [${{ github.event.issue.user.login }}](${{ github.event.issue.user.html_url }})
            ğŸ’¬ *Comments:* `${{ github.event.issue.comments }}`

            ğŸ”— *View Issue:* [Open Issue](${{ github.event.issue.html_url }})

      - name: Issue Comment Notification
        if: github.event_name == 'issue_comment'
        uses: appleboy/telegram-action@master
        with:
          to: "${{ secrets.TELEGRAM_CHAT_ID }}"
          token: "${{ secrets.TELEGRAM_BOT_TOKEN }}"
          message: |
            ğŸ’¬ *Issue Comment Notification* ğŸ’¬
            ğŸ“Œ *Repository:* [${{ github.repository }}](https://github.com/${{ github.repository }})
            ğŸ†• *Issue:* [#${{ github.event.issue.number }}](${{ github.event.issue.html_url }})
            ğŸ‘¤ *By:* [${{ github.event.comment.user.login }}](${{ github.event.comment.user.html_url }})
            ğŸ“ *Comment:* `${{ github.event.comment.body }}`

            ğŸ”— *View Comment:* [Open Comment](${{ github.event.comment.html_url }})

      - name: CI/CD Workflow Notification
        if: github.event_name == 'workflow_run'
        uses: appleboy/telegram-action@master
        with:
          to: "${{ secrets.TELEGRAM_CHAT_ID }}"
          token: "${{ secrets.TELEGRAM_BOT_TOKEN }}"
          message: |
            ğŸ”„ *CI/CD Pipeline Completed* ğŸ”„
            ğŸ“Œ *Repository:* [${{ github.repository }}](https://github.com/${{ github.repository }})
            ğŸ¯ *Workflow:* `"CI/CD Pipeline"`
            âœ… *Status:* `${{ github.event.workflow_run.conclusion }}`
            ğŸ•’ *Duration:* `${{ github.event.workflow_run.run_duration_ms }}ms`
            ğŸ‘¤ *Triggered by:* [${{ github.event.sender.login }}](${{ github.event.sender.html_url }})

            ğŸ”— *Run Details:* [View Run](${{ github.event.workflow_run.html_url }})
